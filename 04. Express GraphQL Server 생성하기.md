# 4. Express GraphQL Server ìƒì„±í•˜ê¸°

---

#### ðŸ”»Apolloëž€? [after study]

> ApolloëŠ” GraphQLì„ Clientì™€  Server ëª¨ë‘ íŽ¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ 

Apollo Client ================> https://apollographql.com/apollo-client

---



#### GraphQL server ìƒì„± 

> GraphQL API ì„œë²„ë¥¼ ì‹¤í–‰í•˜ëŠ” ê°€ìž¥ ê°„ë‹¨í•œ ë°©ë²•ì€ Node.jsìš©ìœ¼ë¡œ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆìž„ì›Œí¬ì¸ Expressë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. 
>
> ë‘ ê°œì˜ ì¶”ê°€ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•´ì•¼ í•œë‹¤. 

```bash
npm install express express-graphql graphql --save
```



---



1. `express-graphql` í´ë” ìƒì„± 
2. `npm init -y` ëª…ë ¹ì–´ë¥¼ í†µí•´ `package.json` íŒŒì¼ ìƒì„±
3. `npm install express express-graphql graphql`  ëª…ë ¹ì–´ë¥¼ í†µí•´ ì„¤ì¹˜

* ##### GraphQL

  > The JavaScript reference implementation for GraphQL 
  >
  > GraphQL.jsëŠ” Type Schemaë¥¼ êµ¬ì¶•í•˜ê³  í•´ë‹¹ Type Schemaì— ëŒ€í•´ ì¿¼ë¦¬ë¥¼ ì œê³µí•˜ëŠ” ë‘ ê°€ì§€ ì¤‘ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. 
  >
  > ```javascript
  > var { buildShema } = require('graphql');
  > 
  > var shema = buildSchema(`
  > 	type Query {
  > 		description: String
  > 	}
  > `);
  > ```

* ##### express-graphql

  > ì—°ê²° ìŠ¤íƒ€ì¼ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì§€ì›í•˜ëŠ” ëª¨ë“  HTTPì›¹ í”„ë ˆìž„ì›Œí¬ë¡œ GraphQL HTTP ì„œë²„ë¥¼ ë§Œë“¬

  

---



```javascript
//server.js

const express = require('express');
const { graphqlHTTP } = require('express-graphql');
const {buildSchema} = require('graphql');

const app = express();
const port = 4000;

const schema = buildSchema(`
    type Query {
        description: String
    }
`);

const root = {
    description: "hello world2"
}


app.use('/graphql', graphqlHTTP({
    schema: schema,
    rootValue: root
}))

app.listen(port, () => {
    console.log(`Running a GraphQL API server at http://localhost:${port}/graphql`);
})
```



* ì„œë²„ ìš”ì²­ë³´ë‚´ê¸°

`node server.js`

![image-20230529144629025](C:\Users\areur\AppData\Roaming\Typora\typora-user-images\image-20230529144629025.png)



* `postman`

##### POST : http://localhost:4000/graphql

> Body > raw > JSON

```js
{
    "query": "{description}"
}
```

```js
{
    "data": {
        "description": "hello word2"
    }
}
```

