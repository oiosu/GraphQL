# 07. GraphQL Tools

##### ğŸ”»Graphql-Toolsë€?

> Graphql ì†ŒìŠ¤ ì½”ë“œê°€ í•œ íŒŒì¼ì— ìˆìœ¼ë©´ ë³µì¡í•´ì§€ê³  ê´€ë¦¬í•˜ê¸° í˜ë“¤ì–´ ì§„ë‹¤. ê·¸ë˜ì„œ ê´€ë ¨ëœ ë¶€ë¶„ë¼ë¦¬ ëª¨ë“ˆí™” í•´ì¤„ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²Œ Graphql-tools ì´ë‹¤. 
>
> ì—¬ê¸°ì„œ graphql-toolsê°€ í•˜ëŠ” ì¼ì€ graphql íŒŒì¼ë“¤ì„ë¶„ë¦¬í•´ë†“ìœ¼ë©´, ë‹¤ì‹œ í•˜ë‚˜ë¡œ ëª¨ì•„ í•©ì³ì£¼ëŠ” ë„êµ¬ì´ë‹¤. 



* ##### íŒ¨í‚¤ì§€ ì„¤ì¹˜í•˜ê¸° 

  `npm install @graphql-tools/schema` 

  (https://www.npmsjs.com/package/@graphql-tools/schema)



* ##### @graph-tools/schema ì ìš©í•˜ê¸° 

> `buildSchema(graphql)`
>
> => `makeExecutableSchema(graphql-tools)`



* `server.js`

```js
const schemaString = `
    type Query {
        post: [Post],
        comments: [Comments]
    }

    type Post {
        id: ID!
        title: String!
        description: String!
        comments: [Comments]
    }

    type Comment {
        id: ID!
        test: String!
        likes: Int
    }
`;

const schema = makeExecutableSchema ({
    typeDefs: [schemaString]
});
```



* ##### ì†ŒìŠ¤ ì½”ë“œ ë‚˜ëˆ ì£¼ê¸° (ëª¨ë“ˆí™” í•˜ê¸°)

> ğŸ“‚ comments
> 	> comments.graphql
>
> ğŸ“‚ posts
>
> â€‹	> posts.graphql



* `post.graphql`

```js
type Query {
    posts: [Post]
}

type Post {
    id: ID!
    title: String!
    description: String!
    comments: [Comments]
}
```



* `comments.graphql`

```js
type Query {
    posts: [Post]
}

type Post {
    id: ID!
    title: String!
    description: String!
    comments: [Comments]
}
```



* `const schemaString` ë¶€ë¶„ `server.js` ì—ì„œ ì§€ì›Œì£¼ê¸°

  (`post.graphql` ê³¼ `comments.graphql` ì— ì‘ì„±í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.)

> ë”°ë¼ì„œ ë‘ê°œì˜ íŒŒì¼ì„ ë‹¤ì‹œ `server.js`ì— ë¶ˆëŸ¬ì™€ ì¤˜ì•¼í•˜ëŠ”ë°, ì¡°ê±´ ë§Œì¡±í•˜ëŠ” íŒŒì¼ ë¶ˆëŸ¬ ì˜¬ë•Œ ë‹¤ìŒ ê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤. 
>
> ```bash
> npm install @graphql-tools/load-files
> ```
>
> ```js
> const shema = makeExecutableSchema({
>     typeDefs: [schemaString]
> });
> ```



> ```js
> /*
> 	loadFilesSyncë¡œ, í˜„ì¬í´ë”(__dirname)ì— ìˆëŠ”, ëª¨ë“  í´ë”(**) ì†, ~.graphqlë¡œ ëë‚˜ëŠ” ëª¨ë“ íŒŒì¼(*) ë¶ˆëŸ¬ì˜¤ê¸°
> */
> 
> const loadedTypes = loadFilesSync('**/*', {
>    extensions: ['graphql'], 
> });
> 
> const shema = makeExecutableSchema({
>     typeDefs: loadedTypes
> });
> ```



* ##### default valueë„ ë¶„ë¦¬í•´ì£¼ê¸° 

> ğŸ“‚ comments
> 	> comments.graphql
>
> â€‹	> comments.model.js
>
> ğŸ“‚ posts
>
> â€‹	> posts.graphql
>
> â€‹	> posts.model.js



* `server.js`

```js
const root = {
    posts: require('./posts/posts.model'),
    comments: require('./comments/comments.model')
}
```

> `comments.mode.js` ì™€ `posts.model.js` ì— ë‹¤ ì˜®ê²¨ ì¤€ í›„ ë¶ˆëŸ¬ì˜¤ê¸° 



